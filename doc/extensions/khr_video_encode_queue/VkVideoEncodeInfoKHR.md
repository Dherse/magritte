[VkVideoEncodeInfoKHR](https://www.khronos.org/registry/vulkan/specs/1.3-extensions/man/html/VkVideoEncodeInfoKHR.html) - Structure to chain codec-specific structures to

# C Specifications
The [`VideoEncodeInfoKHR`] structure is defined as:
```c
// Provided by VK_KHR_video_encode_queue
typedef struct VkVideoEncodeInfoKHR {
    VkStructureType                   sType;
    const void*                       pNext;
    VkVideoEncodeFlagsKHR             flags;
    uint32_t                          qualityLevel;
    VkExtent2D                        codedExtent;
    VkBuffer                          dstBitstreamBuffer;
    VkDeviceSize                      dstBitstreamBufferOffset;
    VkDeviceSize                      dstBitstreamBufferMaxRange;
    VkVideoPictureResourceKHR         srcPictureResource;
    const VkVideoReferenceSlotKHR*    pSetupReferenceSlot;
    uint32_t                          referenceSlotCount;
    const VkVideoReferenceSlotKHR*    pReferenceSlots;
    uint32_t                          precedingExternallyEncodedBytes;
} VkVideoEncodeInfoKHR;
```

# Members
- [`s_type`] is the type of this structure.
- [`p_next`] is a pointer to a structure extending this structure. A codec-specific extension structure  **must**  be chained to specify what bitstream unit to generate with this encode operation.
- [`flags`] is a bitmask of [`VideoEncodeFlagBitsKHR`] specifying encode flags, and is reserved for future versions of this specification.
- [`quality_level`] is the coding quality level of the encoding. It is defined by the codec-specific extensions.
- [`coded_extent`] is the coded size of the encode operations.
- [`dst_bitstream_buffer`] is the buffer where the encoded bitstream output will be produced.
- [`dst_bitstream_buffer_offset`] is the offset in the [`dst_bitstream_buffer`] where the encoded bitstream output will start. [`dst_bitstream_buffer_offset`]’s value  **must**  be aligned to [`VideoCapabilitiesKHR::min_bitstream_buffer_offset_alignment`], as reported by the implementation.
- [`dst_bitstream_buffer_max_range`] is the maximum size of the [`dst_bitstream_buffer`] that can be used while the encoded bitstream output is produced. [`dst_bitstream_buffer_max_range`]’s value  **must**  be aligned to [`VideoCapabilitiesKHR::min_bitstream_buffer_size_alignment`], as reported by the implementation.
- [`src_picture_resource`] is the Picture Resource of the [Input Picture](https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#input-encode-picture) to be encoded by the operation.
- [`setup_reference_slot`] is a pointer to a [`VideoReferenceSlotKHR`] structure used for generating a reconstructed reference slot and Picture Resource. `pSetupReferenceSlot->slotIndex` specifies the slot index number to use as a target for producing the Reconstructed (DPB) data. [`setup_reference_slot`] **must**  be one of the entries provided in [`VideoBeginCodingInfoKHR`] via the [`reference_slots`] within the [`cmd_begin_video_coding_khr`] command that established the Vulkan Video Encode Context for this command.
- [`reference_slot_count`] is the number of Reconstructed Reference Pictures that will be used when this encoding operation is executing.
- [`reference_slots`] is `NULL` or a pointer to an array of [`VideoReferenceSlotKHR`] structures that will be used when this encoding operation is executing. Each entry in [`reference_slots`] **must**  be one of the entries provided in [`VideoBeginCodingInfoKHR`] via the [`reference_slots`] within the [`cmd_begin_video_coding_khr`] command that established the Vulkan Video Encode Context for this command.
- [`preceding_externally_encoded_bytes`] is the number of bytes externally encoded for insertion in the active video encode session overall bitstream prior to the bitstream that will be generated by the implementation for this instance of [`VideoEncodeInfoKHR`]. Valid when [`VideoEncodeRateControlInfoKHR::rate_control_mode`] is not `VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR`. The value provided is used to update the implementation’s rate control algorithm for the rate control layer this instance of [`VideoEncodeInfoKHR`] belongs to, by accounting for the bitrate budget consumed by these externally encoded bytes. See [`VideoEncodeRateControlInfoKHR`] for additional information about encode rate control.

# Description
Multiple [`cmd_encode_video_khr`] commands  **may**  be recorded within a Vulkan
Video Encode Context.
The execution of each [`cmd_encode_video_khr`] command will result in
generating codec-specific bitstream units.
These bitstream units are generated consecutively into the bitstream buffer
specified in [`dst_bitstream_buffer`] of a [`VideoEncodeInfoKHR`]
structure within the [`cmd_begin_video_coding_khr`] command.
The produced bitstream is the sum of all these bitstream units, including
any padding between the bitstream units.
Any bitstream padding  **must**  be filled with data compliant to the codec
standard so as not to cause any syntax errors during decoding of the
bitstream units with the padding included.
The range of the bitstream buffer written  **can**  be queried via
[video encode bitstream buffer
range queries](https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#queries-video-encode-bitstream-buffer-range).
## Valid Usage (Implicit)
-  [`s_type`] **must**  be `VK_STRUCTURE_TYPE_VIDEO_ENCODE_INFO_KHR`
-    Each [`p_next`] member of any structure (including this one) in the [`p_next`] chain  **must**  be either `NULL` or a pointer to a valid instance of [`VideoEncodeH264EmitPictureParametersEXT`], [`VideoEncodeH264VclFrameInfoEXT`], [`VideoEncodeH265EmitPictureParametersEXT`], or [`VideoEncodeH265VclFrameInfoEXT`]
-    The [`s_type`] value of each struct in the [`p_next`] chain  **must**  be unique
-  [`flags`] **must**  be a valid combination of [`VideoEncodeFlagBitsKHR`] values
-  [`dst_bitstream_buffer`] **must**  be a valid [`Buffer`] handle
-  [`src_picture_resource`] **must**  be a valid [`VideoPictureResourceKHR`] structure
-  [`setup_reference_slot`] **must**  be a valid pointer to a valid [`VideoReferenceSlotKHR`] structure
-    If [`reference_slot_count`] is not `0`, [`reference_slots`] **must**  be a valid pointer to an array of [`reference_slot_count`] valid [`VideoReferenceSlotKHR`] structures

# Related
- [`khr_video_encode_queue`]
- [`Buffer`]
- [`DeviceSize`]
- [`Extent2D`]
- [`StructureType`]
- [VkVideoEncodeFlagsKHR]()
- [`VideoPictureResourceKHR`]
- [`VideoReferenceSlotKHR`]
- [`cmd_encode_video_khr`]

# Notes and documentation
For more information, see the [Vulkan specification](https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html)
This documentation is generated from the Vulkan specification and documentation.
The documentation is copyrighted by *The Khronos Group Inc.* and is licensed under *Creative Commons Attribution 4.0 International*.
his license explicitely allows adapting the source material as long as proper credit is given.
        